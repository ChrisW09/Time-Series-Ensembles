=================================================================================
[2024-03-06 05:56] Starting  Pipeline...

=====================================================
== Starting Step 1 in Pipeline: Data Preprocessing ==
=====================================================

Searching for time information...
Dates found in 'index' column!
Inferred frequency: month start
Data from goes from 2004-01-01 to 2013-12-01, resulting in 120 observations.

Selecting target and covariates...
Target: y
Covariates: x1, x2, x3

Data Insight:

                    y          x1         x2          x3
Date                                                    
2004-01-01  50.840469  427.595799  55.337904  900.325291
2004-02-01  52.871538  434.062163  54.959155  900.775888
2004-03-01  53.769316  453.264284  56.470633  899.510058
2004-04-01  57.672973  459.367523  56.704233  903.524834
2004-05-01  57.182051  462.354356  61.557907  905.071762
[Time elapsed: 00s]


=======================================================
== Starting Step 2 in Pipeline: Individual Forecasts ==
=======================================================

Splitting data (train/test ratio: 30/70)...
Initial training set has 36 observations 
and goes from 2004-01-01 to 2006-12-01
There are 84 periods to be forecasted: 
2007-01-01 to 2013-12-01

Now generating 84 one-step ahead expanding window predictions from model: Naive (sktime)
...finished!

Now generating 84 one-step ahead expanding window predictions from model: Naive (drift) (sktime)
...finished!

Now generating 84 one-step ahead expanding window predictions from model: AutoSARIMA (sktime)
Auto-fitting model. Refitting every 28th period.
AutoSARIMA forecast 1 / 84
AutoSARIMA forecast 17 / 84
...automatic refitting...
AutoSARIMA forecast 34 / 84
AutoSARIMA forecast 51 / 84
...automatic refitting...
AutoSARIMA forecast 68 / 84
AutoSARIMA forecast 84 / 84
...finished!

Now generating 84 one-step ahead expanding window predictions from model: Exponential Smoothing (sktime)
...finished!

Now generating 84 one-step ahead expanding window predictions from model: STL (sktime)
...finished!

Now generating 84 one-step ahead expanding window predictions from model: XGBoost (darts)
...finished!

Now generating 84 one-step ahead expanding window predictions from model: AutoSARIMAX with covariates (sktime.lagged)
Auto-fitting model. Refitting every 28th period.
AutoSARIMAX with covariates forecast 1 / 84
AutoSARIMAX with covariates forecast 17 / 84
...automatic refitting...
AutoSARIMAX with covariates forecast 34 / 84
AutoSARIMAX with covariates forecast 51 / 84
...automatic refitting...
AutoSARIMAX with covariates forecast 68 / 84
AutoSARIMAX with covariates forecast 84 / 84
...finished!

Now generating 84 one-step ahead expanding window predictions from model: XGBoost with covariates (darts)
...finished!


Individual forecasters' predictions finished!

Insights into forecasters' predictions:
             Naive  Naive (drift)  AutoSARIMA  Exponential Smoothing  \
Date                                                                   
2007-01  48.857243      48.800580   49.606623              49.016606   
2007-02  48.254157      48.182315   48.515764              48.500499   
2007-03  47.765006      47.681886   47.973535              48.001824   
2007-04  46.394433      46.277432   46.969779              46.904911   
2007-05  44.212976      44.043041   45.108821              45.025232   

               STL    XGBoost  AutoSARIMAX with covariates  \
Date                                                         
2007-01  40.574201  48.632446                    44.513787   
2007-02  41.374739  50.458118                    44.359217   
2007-03  45.653502  47.823650                    48.442624   
2007-04  41.569708  47.594688                    49.511544   
2007-05  49.855823  48.784794                    53.863918   

         XGBoost with covariates  
Date                              
2007-01                49.624989  
2007-02                49.453224  
2007-03                48.497398  
2007-04                48.059471  
2007-05                45.706074  


Exporting individual predictions as csv...
...finished!

[Time elapsed: 04m 39s]


=============================================
== Step 3: Historical Ensemble Predictions ==
=============================================

Splitting forecast data (n = 84) for ensemble forecasts (train/test ratio: 30/70)...
Initial training set has 25 observations and goes from 2007-01 to 2009-01
There are 59 periods to be forecasted by the individual models 2009-02 to 2013-12

Now generating 59 one-step ahead expanding window predictions from ensemble model: 'Weighted - Simple ()'
Ensemble forecast 1 / 59
Ensemble forecast 12 / 59
Ensemble forecast 24 / 59
Ensemble forecast 36 / 59
Ensemble forecast 48 / 59
Ensemble forecast 59 / 59
...finished!

Now generating 59 one-step ahead expanding window predictions from ensemble model: 'Weighted - Inverse RMSE ()'
Ensemble forecast 1 / 59
Ensemble forecast 12 / 59
Ensemble forecast 24 / 59
Ensemble forecast 36 / 59
Ensemble forecast 48 / 59
Ensemble forecast 59 / 59
...finished!

Now generating 59 one-step ahead expanding window predictions from ensemble model: 'Weighted - Inverse Variance ()'
Ensemble forecast 1 / 59
Ensemble forecast 12 / 59
Ensemble forecast 24 / 59
Ensemble forecast 36 / 59
Ensemble forecast 48 / 59
Ensemble forecast 59 / 59
...finished!

Now generating 59 one-step ahead expanding window predictions from ensemble model: 'Weighted - Inverse Error Covariance ()'
Ensemble forecast 1 / 59
Ensemble forecast 12 / 59
Ensemble forecast 24 / 59
Ensemble forecast 36 / 59
Ensemble forecast 48 / 59
Ensemble forecast 59 / 59
...finished!

Now generating 59 one-step ahead expanding window predictions from ensemble model: 'Meta - SVR (sklearn)'
Ensemble forecast 1 / 59
Ensemble forecast 12 / 59
Ensemble forecast 24 / 59
Ensemble forecast 36 / 59
Ensemble forecast 48 / 59
Ensemble forecast 59 / 59
...finished!

Now generating 59 one-step ahead expanding window predictions from ensemble model: 'Meta - RandomForest (sklearn)'
Ensemble forecast 1 / 59
Ensemble forecast 12 / 59
Ensemble forecast 24 / 59
Ensemble forecast 36 / 59
Ensemble forecast 48 / 59
Ensemble forecast 59 / 59
...finished!

Ensemble predictions finished!

Insights into ensembles' predictions:
         Weighted Ensemble: Simple  Weighted Ensemble: Inverse RMSE  \
2009-02                  61.612665                        61.202309   
2009-03                  59.163315                        59.052996   
2009-04                  58.909339                        58.899096   
2009-05                  58.412994                        58.140892   
2009-06                  59.456828                        59.618394   

         Weighted Ensemble: Inverse Variance  \
2009-02                            61.365692   
2009-03                            58.941138   
2009-04                            58.693316   
2009-05                            58.041535   
2009-06                            59.282305   

         Weighted Ensemble: Inverse Error Covariance  Meta Ensemble: SVR  \
2009-02                                    62.946926           64.898382   
2009-03                                    58.894965           58.877583   
2009-04                                    58.342223           59.828429   
2009-05                                    54.614041           57.724974   
2009-06                                    59.082615           59.781163   

         Meta Ensemble: RandomForest  
2009-02                    60.230293  
2009-03                    60.153150  
2009-04                    59.268348  
2009-05                    59.236785  
2009-06                    58.568303  

Merging...
...finished!

Exporting ensemble predictions as csv...
Exporting full predictions as csv...
...finished!

[Time elapsed: 04m 53s]


============================================
== Step 4: Creating Metrics Ranking Table ==
============================================

Calculating mape, rmse, smape per model...
Ranking forecasters ...
...finished!

Exporting metrics ranking as csv...
...finished!

Results:
                                          Model      mape      rmse     smape  \
0               Weighted Ensemble: Inverse RMSE  2.755630  2.618257  1.846892   
1                     Weighted Ensemble: Simple  2.761866  2.636096  1.850825   
2           Weighted Ensemble: Inverse Variance  2.779044  2.638848  1.863383   
3                         Exponential Smoothing  2.869827  2.706564  1.923401   
4                                         Naive  2.898468  2.747925  1.941180   
5                                    AutoSARIMA  2.917465  2.730580  1.953598   
6                                 Naive (drift)  2.938237  2.748343  1.963672   
7                   Meta Ensemble: RandomForest  3.041802  2.796183  2.038740   
8                   AutoSARIMAX with covariates  3.130258  2.968497  2.085660   
9   Weighted Ensemble: Inverse Error Covariance  3.141903  3.031370  2.105506   
10                      XGBoost with covariates  3.159101  3.130366  2.131706   
11                                      XGBoost  3.160933  2.986848  2.135754   
12                           Meta Ensemble: SVR  3.185566  2.986565  2.127017   
13                                          STL  4.914173  4.620506  3.266421   

    MAPE Ranking  RMSE Ranking  SMAPE Ranking  
0              1             1              1  
1              2             2              2  
2              3             3              3  
3              4             4              4  
4              5             6              5  
5              6             5              6  
6              7             7              7  
7              8             8              8  
8              9             9              9  
9             10            12             10  
10            11            13             12  
11            12            11             13  
12            13            10             11  
13            14            14             14  


[2024-03-06 06:01] Finished Pipeline!
[Total time elapsed: 04m 53s]
=================================================================================
